(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_core-js_modules_es_array_for-each_js-node_modules_core-js_modules_web_do-e225f3"],{

/***/ "./node_modules/core-js/internals/array-for-each.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-for-each.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $forEach = (__webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").forEach);
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var STRICT_METHOD = arrayMethodIsStrict('forEach');

// `Array.prototype.forEach` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.foreach
module.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {
  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
} : [].forEach;


/***/ }),

/***/ "./node_modules/core-js/internals/array-method-is-strict.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/array-method-is-strict.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = function (METHOD_NAME, argument) {
  var method = [][METHOD_NAME];
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call -- required for testing
    method.call(null, argument || function () { return 1; }, 1);
  });
};


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.for-each.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.for-each.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var forEach = __webpack_require__(/*! ../internals/array-for-each */ "./node_modules/core-js/internals/array-for-each.js");

// `Array.prototype.forEach` method
// https://tc39.es/ecma262/#sec-array.prototype.foreach
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {
  forEach: forEach
});


/***/ }),

/***/ "./node_modules/core-js/modules/web.dom-collections.for-each.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/modules/web.dom-collections.for-each.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var DOMIterables = __webpack_require__(/*! ../internals/dom-iterables */ "./node_modules/core-js/internals/dom-iterables.js");
var DOMTokenListPrototype = __webpack_require__(/*! ../internals/dom-token-list-prototype */ "./node_modules/core-js/internals/dom-token-list-prototype.js");
var forEach = __webpack_require__(/*! ../internals/array-for-each */ "./node_modules/core-js/internals/array-for-each.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");

var handlePrototype = function (CollectionPrototype) {
  // some Chrome versions have non-configurable methods on DOMTokenList
  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {
    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
    CollectionPrototype.forEach = forEach;
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  if (DOMIterables[COLLECTION_NAME]) {
    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);
  }
}

handlePrototype(DOMTokenListPrototype);


/***/ }),

/***/ "./node_modules/notyf/notyf.min.css":
/*!******************************************!*\
  !*** ./node_modules/notyf/notyf.min.css ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./node_modules/notyf/notyf.es.js":
/*!****************************************!*\
  !*** ./node_modules/notyf/notyf.es.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DEFAULT_OPTIONS": () => (/* binding */ DEFAULT_OPTIONS),
/* harmony export */   "Notyf": () => (/* binding */ Notyf),
/* harmony export */   "NotyfArray": () => (/* binding */ NotyfArray),
/* harmony export */   "NotyfArrayEvent": () => (/* binding */ NotyfArrayEvent),
/* harmony export */   "NotyfEvent": () => (/* binding */ NotyfEvent),
/* harmony export */   "NotyfNotification": () => (/* binding */ NotyfNotification),
/* harmony export */   "NotyfView": () => (/* binding */ NotyfView)
/* harmony export */ });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var NotyfNotification = /** @class */ (function () {
    function NotyfNotification(options) {
        this.options = options;
        this.listeners = {};
    }
    NotyfNotification.prototype.on = function (eventType, cb) {
        var callbacks = this.listeners[eventType] || [];
        this.listeners[eventType] = callbacks.concat([cb]);
    };
    NotyfNotification.prototype.triggerEvent = function (eventType, event) {
        var _this = this;
        var callbacks = this.listeners[eventType] || [];
        callbacks.forEach(function (cb) { return cb({ target: _this, event: event }); });
    };
    return NotyfNotification;
}());
var NotyfArrayEvent;
(function (NotyfArrayEvent) {
    NotyfArrayEvent[NotyfArrayEvent["Add"] = 0] = "Add";
    NotyfArrayEvent[NotyfArrayEvent["Remove"] = 1] = "Remove";
})(NotyfArrayEvent || (NotyfArrayEvent = {}));
var NotyfArray = /** @class */ (function () {
    function NotyfArray() {
        this.notifications = [];
    }
    NotyfArray.prototype.push = function (elem) {
        this.notifications.push(elem);
        this.updateFn(elem, NotyfArrayEvent.Add, this.notifications);
    };
    NotyfArray.prototype.splice = function (index, num) {
        var elem = this.notifications.splice(index, num)[0];
        this.updateFn(elem, NotyfArrayEvent.Remove, this.notifications);
        return elem;
    };
    NotyfArray.prototype.indexOf = function (elem) {
        return this.notifications.indexOf(elem);
    };
    NotyfArray.prototype.onUpdate = function (fn) {
        this.updateFn = fn;
    };
    return NotyfArray;
}());

var NotyfEvent;
(function (NotyfEvent) {
    NotyfEvent["Dismiss"] = "dismiss";
    NotyfEvent["Click"] = "click";
})(NotyfEvent || (NotyfEvent = {}));
var DEFAULT_OPTIONS = {
    types: [
        {
            type: 'success',
            className: 'notyf__toast--success',
            backgroundColor: '#3dc763',
            icon: {
                className: 'notyf__icon--success',
                tagName: 'i',
            },
        },
        {
            type: 'error',
            className: 'notyf__toast--error',
            backgroundColor: '#ed3d3d',
            icon: {
                className: 'notyf__icon--error',
                tagName: 'i',
            },
        },
    ],
    duration: 2000,
    ripple: true,
    position: {
        x: 'right',
        y: 'bottom',
    },
    dismissible: false,
};

var NotyfView = /** @class */ (function () {
    function NotyfView() {
        this.notifications = [];
        this.events = {};
        this.X_POSITION_FLEX_MAP = {
            left: 'flex-start',
            center: 'center',
            right: 'flex-end',
        };
        this.Y_POSITION_FLEX_MAP = {
            top: 'flex-start',
            center: 'center',
            bottom: 'flex-end',
        };
        // Creates the main notifications container
        var docFrag = document.createDocumentFragment();
        var notyfContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf' });
        docFrag.appendChild(notyfContainer);
        document.body.appendChild(docFrag);
        this.container = notyfContainer;
        // Identifies the main animation end event
        this.animationEndEventName = this._getAnimationEndEventName();
        this._createA11yContainer();
    }
    NotyfView.prototype.on = function (event, cb) {
        var _a;
        this.events = __assign(__assign({}, this.events), (_a = {}, _a[event] = cb, _a));
    };
    NotyfView.prototype.update = function (notification, type) {
        if (type === NotyfArrayEvent.Add) {
            this.addNotification(notification);
        }
        else if (type === NotyfArrayEvent.Remove) {
            this.removeNotification(notification);
        }
    };
    NotyfView.prototype.removeNotification = function (notification) {
        var _this = this;
        var renderedNotification = this._popRenderedNotification(notification);
        var node;
        if (!renderedNotification) {
            return;
        }
        node = renderedNotification.node;
        node.classList.add('notyf__toast--disappear');
        var handleEvent;
        node.addEventListener(this.animationEndEventName, (handleEvent = function (event) {
            if (event.target === node) {
                node.removeEventListener(_this.animationEndEventName, handleEvent);
                _this.container.removeChild(node);
            }
        }));
    };
    NotyfView.prototype.addNotification = function (notification) {
        var node = this._renderNotification(notification);
        this.notifications.push({ notification: notification, node: node });
        // For a11y purposes, we still want to announce that there's a notification in the screen
        // even if it comes with no message.
        this._announce(notification.options.message || 'Notification');
    };
    NotyfView.prototype._renderNotification = function (notification) {
        var _a;
        var card = this._buildNotificationCard(notification);
        var className = notification.options.className;
        if (className) {
            (_a = card.classList).add.apply(_a, className.split(' '));
        }
        this.container.appendChild(card);
        return card;
    };
    NotyfView.prototype._popRenderedNotification = function (notification) {
        var idx = -1;
        for (var i = 0; i < this.notifications.length && idx < 0; i++) {
            if (this.notifications[i].notification === notification) {
                idx = i;
            }
        }
        if (idx !== -1) {
            return this.notifications.splice(idx, 1)[0];
        }
        return;
    };
    NotyfView.prototype.getXPosition = function (options) {
        var _a;
        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.x) || 'right';
    };
    NotyfView.prototype.getYPosition = function (options) {
        var _a;
        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.y) || 'bottom';
    };
    NotyfView.prototype.adjustContainerAlignment = function (options) {
        var align = this.X_POSITION_FLEX_MAP[this.getXPosition(options)];
        var justify = this.Y_POSITION_FLEX_MAP[this.getYPosition(options)];
        var style = this.container.style;
        style.setProperty('justify-content', justify);
        style.setProperty('align-items', align);
    };
    NotyfView.prototype._buildNotificationCard = function (notification) {
        var _this = this;
        var options = notification.options;
        var iconOpts = options.icon;
        // Adjust container according to position (e.g. top-left, bottom-center, etc)
        this.adjustContainerAlignment(options);
        // Create elements
        var notificationElem = this._createHTMLElement({ tagName: 'div', className: 'notyf__toast' });
        var ripple = this._createHTMLElement({ tagName: 'div', className: 'notyf__ripple' });
        var wrapper = this._createHTMLElement({ tagName: 'div', className: 'notyf__wrapper' });
        var message = this._createHTMLElement({ tagName: 'div', className: 'notyf__message' });
        message.innerHTML = options.message || '';
        var mainColor = options.background || options.backgroundColor;
        // Build the icon and append it to the card
        if (iconOpts) {
            var iconContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf__icon' });
            if (typeof iconOpts === 'string' || iconOpts instanceof String)
                iconContainer.innerHTML = new String(iconOpts).valueOf();
            if (typeof iconOpts === 'object') {
                var _a = iconOpts.tagName, tagName = _a === void 0 ? 'i' : _a, className_1 = iconOpts.className, text = iconOpts.text, _b = iconOpts.color, color = _b === void 0 ? mainColor : _b;
                var iconElement = this._createHTMLElement({ tagName: tagName, className: className_1, text: text });
                if (color)
                    iconElement.style.color = color;
                iconContainer.appendChild(iconElement);
            }
            wrapper.appendChild(iconContainer);
        }
        wrapper.appendChild(message);
        notificationElem.appendChild(wrapper);
        // Add ripple if applicable, else just paint the full toast
        if (mainColor) {
            if (options.ripple) {
                ripple.style.background = mainColor;
                notificationElem.appendChild(ripple);
            }
            else {
                notificationElem.style.background = mainColor;
            }
        }
        // Add dismiss button
        if (options.dismissible) {
            var dismissWrapper = this._createHTMLElement({ tagName: 'div', className: 'notyf__dismiss' });
            var dismissButton = this._createHTMLElement({
                tagName: 'button',
                className: 'notyf__dismiss-btn',
            });
            dismissWrapper.appendChild(dismissButton);
            wrapper.appendChild(dismissWrapper);
            notificationElem.classList.add("notyf__toast--dismissible");
            dismissButton.addEventListener('click', function (event) {
                var _a, _b;
                (_b = (_a = _this.events)[NotyfEvent.Dismiss]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event });
                event.stopPropagation();
            });
        }
        notificationElem.addEventListener('click', function (event) { var _a, _b; return (_b = (_a = _this.events)[NotyfEvent.Click]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event }); });
        // Adjust margins depending on whether its an upper or lower notification
        var className = this.getYPosition(options) === 'top' ? 'upper' : 'lower';
        notificationElem.classList.add("notyf__toast--" + className);
        return notificationElem;
    };
    NotyfView.prototype._createHTMLElement = function (_a) {
        var tagName = _a.tagName, className = _a.className, text = _a.text;
        var elem = document.createElement(tagName);
        if (className) {
            elem.className = className;
        }
        elem.textContent = text || null;
        return elem;
    };
    /**
     * Creates an invisible container which will announce the notyfs to
     * screen readers
     */
    NotyfView.prototype._createA11yContainer = function () {
        var a11yContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf-announcer' });
        a11yContainer.setAttribute('aria-atomic', 'true');
        a11yContainer.setAttribute('aria-live', 'polite');
        // Set the a11y container to be visible hidden. Can't use display: none as
        // screen readers won't read it.
        a11yContainer.style.border = '0';
        a11yContainer.style.clip = 'rect(0 0 0 0)';
        a11yContainer.style.height = '1px';
        a11yContainer.style.margin = '-1px';
        a11yContainer.style.overflow = 'hidden';
        a11yContainer.style.padding = '0';
        a11yContainer.style.position = 'absolute';
        a11yContainer.style.width = '1px';
        a11yContainer.style.outline = '0';
        document.body.appendChild(a11yContainer);
        this.a11yContainer = a11yContainer;
    };
    /**
     * Announces a message to screenreaders.
     */
    NotyfView.prototype._announce = function (message) {
        var _this = this;
        this.a11yContainer.textContent = '';
        // This 100ms timeout is necessary for some browser + screen-reader combinations:
        // - Both JAWS and NVDA over IE11 will not announce anything without a non-zero timeout.
        // - With Chrome and IE11 with NVDA or JAWS, a repeated (identical) message won't be read a
        //   second time without clearing and then using a non-zero delay.
        // (using JAWS 17 at time of this writing).
        // https://github.com/angular/material2/blob/master/src/cdk/a11y/live-announcer/live-announcer.ts
        setTimeout(function () {
            _this.a11yContainer.textContent = message;
        }, 100);
    };
    /**
     * Determine which animationend event is supported
     */
    NotyfView.prototype._getAnimationEndEventName = function () {
        var el = document.createElement('_fake');
        var transitions = {
            MozTransition: 'animationend',
            OTransition: 'oAnimationEnd',
            WebkitTransition: 'webkitAnimationEnd',
            transition: 'animationend',
        };
        var t;
        for (t in transitions) {
            if (el.style[t] !== undefined) {
                return transitions[t];
            }
        }
        // No supported animation end event. Using "animationend" as a fallback
        return 'animationend';
    };
    return NotyfView;
}());

/**
 * Main controller class. Defines the main Notyf API.
 */
var Notyf = /** @class */ (function () {
    function Notyf(opts) {
        var _this = this;
        this.dismiss = this._removeNotification;
        this.notifications = new NotyfArray();
        this.view = new NotyfView();
        var types = this.registerTypes(opts);
        this.options = __assign(__assign({}, DEFAULT_OPTIONS), opts);
        this.options.types = types;
        this.notifications.onUpdate(function (elem, type) { return _this.view.update(elem, type); });
        this.view.on(NotyfEvent.Dismiss, function (_a) {
            var target = _a.target, event = _a.event;
            _this._removeNotification(target);
            // tslint:disable-next-line: no-string-literal
            target['triggerEvent'](NotyfEvent.Dismiss, event);
        });
        // tslint:disable-next-line: no-string-literal
        this.view.on(NotyfEvent.Click, function (_a) {
            var target = _a.target, event = _a.event;
            return target['triggerEvent'](NotyfEvent.Click, event);
        });
    }
    Notyf.prototype.error = function (payload) {
        var options = this.normalizeOptions('error', payload);
        return this.open(options);
    };
    Notyf.prototype.success = function (payload) {
        var options = this.normalizeOptions('success', payload);
        return this.open(options);
    };
    Notyf.prototype.open = function (options) {
        var defaultOpts = this.options.types.find(function (_a) {
            var type = _a.type;
            return type === options.type;
        }) || {};
        var config = __assign(__assign({}, defaultOpts), options);
        this.assignProps(['ripple', 'position', 'dismissible'], config);
        var notification = new NotyfNotification(config);
        this._pushNotification(notification);
        return notification;
    };
    Notyf.prototype.dismissAll = function () {
        while (this.notifications.splice(0, 1))
            ;
    };
    /**
     * Assigns properties to a config object based on two rules:
     * 1. If the config object already sets that prop, leave it as so
     * 2. Otherwise, use the default prop from the global options
     *
     * It's intended to build the final config object to open a notification. e.g. if
     * 'dismissible' is not set, then use the value from the global config.
     *
     * @param props - properties to be assigned to the config object
     * @param config - object whose properties need to be set
     */
    Notyf.prototype.assignProps = function (props, config) {
        var _this = this;
        props.forEach(function (prop) {
            // intentional double equality to check for both null and undefined
            config[prop] = config[prop] == null ? _this.options[prop] : config[prop];
        });
    };
    Notyf.prototype._pushNotification = function (notification) {
        var _this = this;
        this.notifications.push(notification);
        var duration = notification.options.duration !== undefined ? notification.options.duration : this.options.duration;
        if (duration) {
            setTimeout(function () { return _this._removeNotification(notification); }, duration);
        }
    };
    Notyf.prototype._removeNotification = function (notification) {
        var index = this.notifications.indexOf(notification);
        if (index !== -1) {
            this.notifications.splice(index, 1);
        }
    };
    Notyf.prototype.normalizeOptions = function (type, payload) {
        var options = { type: type };
        if (typeof payload === 'string') {
            options.message = payload;
        }
        else if (typeof payload === 'object') {
            options = __assign(__assign({}, options), payload);
        }
        return options;
    };
    Notyf.prototype.registerTypes = function (opts) {
        var incomingTypes = ((opts && opts.types) || []).slice();
        var finalDefaultTypes = DEFAULT_OPTIONS.types.map(function (defaultType) {
            // find if there's a default type within the user input's types, if so, it means the user
            // wants to change some of the default settings
            var userTypeIdx = -1;
            incomingTypes.forEach(function (t, idx) {
                if (t.type === defaultType.type)
                    userTypeIdx = idx;
            });
            var userType = userTypeIdx !== -1 ? incomingTypes.splice(userTypeIdx, 1)[0] : {};
            return __assign(__assign({}, defaultType), userType);
        });
        return finalDefaultTypes.concat(incomingTypes);
    };
    return Notyf;
}());




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29yZS1qc19tb2R1bGVzX2VzX2FycmF5X2Zvci1lYWNoX2pzLW5vZGVfbW9kdWxlc19jb3JlLWpzX21vZHVsZXNfd2ViX2RvLWUyMjVmMy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNiLGVBQWUsd0hBQStDO0FBQzlELDBCQUEwQixtQkFBTyxDQUFDLHVHQUFxQzs7QUFFdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7Ozs7Ozs7Ozs7OztBQ1hXO0FBQ2IsWUFBWSxtQkFBTyxDQUFDLHFFQUFvQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsV0FBVztBQUMzRCxHQUFHO0FBQ0g7Ozs7Ozs7Ozs7OztBQ1RhO0FBQ2IsUUFBUSxtQkFBTyxDQUFDLHVFQUFxQjtBQUNyQyxjQUFjLG1CQUFPLENBQUMsdUZBQTZCOztBQUVuRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZEQUE2RDtBQUNqRTtBQUNBLENBQUM7Ozs7Ozs7Ozs7O0FDVEQsYUFBYSxtQkFBTyxDQUFDLHVFQUFxQjtBQUMxQyxtQkFBbUIsbUJBQU8sQ0FBQyxxRkFBNEI7QUFDdkQsNEJBQTRCLG1CQUFPLENBQUMsMkdBQXVDO0FBQzNFLGNBQWMsbUJBQU8sQ0FBQyx1RkFBNkI7QUFDbkQsa0NBQWtDLG1CQUFPLENBQUMsdUhBQTZDOztBQUV2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3JCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsNERBQTRELHVDQUF1QztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsaURBQWlEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1Q0FBdUM7QUFDdkMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRXdHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LWZvci1lYWNoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1tZXRob2QtaXMtc3RyaWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ub3R5Zi9ub3R5Zi5taW4uY3NzP2Q0OWQiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL25vdHlmL25vdHlmLmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbnZhciAkZm9yRWFjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pdGVyYXRpb24nKS5mb3JFYWNoO1xudmFyIGFycmF5TWV0aG9kSXNTdHJpY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLWlzLXN0cmljdCcpO1xuXG52YXIgU1RSSUNUX01FVEhPRCA9IGFycmF5TWV0aG9kSXNTdHJpY3QoJ2ZvckVhY2gnKTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZvcmVhY2hcbm1vZHVsZS5leHBvcnRzID0gIVNUUklDVF9NRVRIT0QgPyBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKSB7XG4gIHJldHVybiAkZm9yRWFjaCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tYXJyYXktcHJvdG90eXBlLWZvcmVhY2ggLS0gc2FmZVxufSA6IFtdLmZvckVhY2g7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUsIGFyZ3VtZW50KSB7XG4gIHZhciBtZXRob2QgPSBbXVtNRVRIT0RfTkFNRV07XG4gIHJldHVybiAhIW1ldGhvZCAmJiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICAgIG1ldGhvZC5jYWxsKG51bGwsIGFyZ3VtZW50IHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDE7IH0sIDEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBmb3JFYWNoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWZvci1lYWNoJyk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUuZm9yRWFjaGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5mb3JlYWNoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tYXJyYXktcHJvdG90eXBlLWZvcmVhY2ggLS0gc2FmZVxuJCh7IHRhcmdldDogJ0FycmF5JywgcHJvdG86IHRydWUsIGZvcmNlZDogW10uZm9yRWFjaCAhPSBmb3JFYWNoIH0sIHtcbiAgZm9yRWFjaDogZm9yRWFjaFxufSk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIERPTUl0ZXJhYmxlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb20taXRlcmFibGVzJyk7XG52YXIgRE9NVG9rZW5MaXN0UHJvdG90eXBlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvbS10b2tlbi1saXN0LXByb3RvdHlwZScpO1xudmFyIGZvckVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktZm9yLWVhY2gnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG5cbnZhciBoYW5kbGVQcm90b3R5cGUgPSBmdW5jdGlvbiAoQ29sbGVjdGlvblByb3RvdHlwZSkge1xuICAvLyBzb21lIENocm9tZSB2ZXJzaW9ucyBoYXZlIG5vbi1jb25maWd1cmFibGUgbWV0aG9kcyBvbiBET01Ub2tlbkxpc3RcbiAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGUgJiYgQ29sbGVjdGlvblByb3RvdHlwZS5mb3JFYWNoICE9PSBmb3JFYWNoKSB0cnkge1xuICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShDb2xsZWN0aW9uUHJvdG90eXBlLCAnZm9yRWFjaCcsIGZvckVhY2gpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIENvbGxlY3Rpb25Qcm90b3R5cGUuZm9yRWFjaCA9IGZvckVhY2g7XG4gIH1cbn07XG5cbmZvciAodmFyIENPTExFQ1RJT05fTkFNRSBpbiBET01JdGVyYWJsZXMpIHtcbiAgaWYgKERPTUl0ZXJhYmxlc1tDT0xMRUNUSU9OX05BTUVdKSB7XG4gICAgaGFuZGxlUHJvdG90eXBlKGdsb2JhbFtDT0xMRUNUSU9OX05BTUVdICYmIGdsb2JhbFtDT0xMRUNUSU9OX05BTUVdLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuaGFuZGxlUHJvdG90eXBlKERPTVRva2VuTGlzdFByb3RvdHlwZSk7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxudmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcblxudmFyIE5vdHlmTm90aWZpY2F0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm90eWZOb3RpZmljYXRpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgIH1cclxuICAgIE5vdHlmTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGNiKSB7XHJcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50VHlwZV0gfHwgW107XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IGNhbGxiYWNrcy5jb25jYXQoW2NiXSk7XHJcbiAgICB9O1xyXG4gICAgTm90eWZOb3RpZmljYXRpb24ucHJvdG90eXBlLnRyaWdnZXJFdmVudCA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRUeXBlXSB8fCBbXTtcclxuICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgcmV0dXJuIGNiKHsgdGFyZ2V0OiBfdGhpcywgZXZlbnQ6IGV2ZW50IH0pOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZOb3RpZmljYXRpb247XHJcbn0oKSk7XHJcbnZhciBOb3R5ZkFycmF5RXZlbnQ7XHJcbihmdW5jdGlvbiAoTm90eWZBcnJheUV2ZW50KSB7XHJcbiAgICBOb3R5ZkFycmF5RXZlbnRbTm90eWZBcnJheUV2ZW50W1wiQWRkXCJdID0gMF0gPSBcIkFkZFwiO1xyXG4gICAgTm90eWZBcnJheUV2ZW50W05vdHlmQXJyYXlFdmVudFtcIlJlbW92ZVwiXSA9IDFdID0gXCJSZW1vdmVcIjtcclxufSkoTm90eWZBcnJheUV2ZW50IHx8IChOb3R5ZkFycmF5RXZlbnQgPSB7fSkpO1xyXG52YXIgTm90eWZBcnJheSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vdHlmQXJyYXkoKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgICB9XHJcbiAgICBOb3R5ZkFycmF5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMucHVzaChlbGVtKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZuKGVsZW0sIE5vdHlmQXJyYXlFdmVudC5BZGQsIHRoaXMubm90aWZpY2F0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgTm90eWZBcnJheS5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24gKGluZGV4LCBudW0pIHtcclxuICAgICAgICB2YXIgZWxlbSA9IHRoaXMubm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIG51bSlbMF07XHJcbiAgICAgICAgdGhpcy51cGRhdGVGbihlbGVtLCBOb3R5ZkFycmF5RXZlbnQuUmVtb3ZlLCB0aGlzLm5vdGlmaWNhdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBlbGVtO1xyXG4gICAgfTtcclxuICAgIE5vdHlmQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbnMuaW5kZXhPZihlbGVtKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZkFycmF5LnByb3RvdHlwZS5vblVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRm4gPSBmbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZBcnJheTtcclxufSgpKTtcblxudmFyIE5vdHlmRXZlbnQ7XHJcbihmdW5jdGlvbiAoTm90eWZFdmVudCkge1xyXG4gICAgTm90eWZFdmVudFtcIkRpc21pc3NcIl0gPSBcImRpc21pc3NcIjtcclxuICAgIE5vdHlmRXZlbnRbXCJDbGlja1wiXSA9IFwiY2xpY2tcIjtcclxufSkoTm90eWZFdmVudCB8fCAoTm90eWZFdmVudCA9IHt9KSk7XHJcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XHJcbiAgICB0eXBlczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QtLXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjM2RjNzYzJyxcclxuICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX2ljb24tLXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgdGFnTmFtZTogJ2knLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QtLWVycm9yJyxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2VkM2QzZCcsXHJcbiAgICAgICAgICAgIGljb246IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdHlmX19pY29uLS1lcnJvcicsXHJcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiAnaScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIF0sXHJcbiAgICBkdXJhdGlvbjogMjAwMCxcclxuICAgIHJpcHBsZTogdHJ1ZSxcclxuICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgeDogJ3JpZ2h0JyxcclxuICAgICAgICB5OiAnYm90dG9tJyxcclxuICAgIH0sXHJcbiAgICBkaXNtaXNzaWJsZTogZmFsc2UsXHJcbn07XG5cbnZhciBOb3R5ZlZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOb3R5ZlZpZXcoKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgICAgICB0aGlzLlhfUE9TSVRJT05fRkxFWF9NQVAgPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6ICdmbGV4LXN0YXJ0JyxcclxuICAgICAgICAgICAgY2VudGVyOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgcmlnaHQ6ICdmbGV4LWVuZCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLllfUE9TSVRJT05fRkxFWF9NQVAgPSB7XHJcbiAgICAgICAgICAgIHRvcDogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgICAgICAgICBjZW50ZXI6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICBib3R0b206ICdmbGV4LWVuZCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDcmVhdGVzIHRoZSBtYWluIG5vdGlmaWNhdGlvbnMgY29udGFpbmVyXHJcbiAgICAgICAgdmFyIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgdmFyIG5vdHlmQ29udGFpbmVyID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiAnZGl2JywgY2xhc3NOYW1lOiAnbm90eWYnIH0pO1xyXG4gICAgICAgIGRvY0ZyYWcuYXBwZW5kQ2hpbGQobm90eWZDb250YWluZXIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jRnJhZyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBub3R5ZkNvbnRhaW5lcjtcclxuICAgICAgICAvLyBJZGVudGlmaWVzIHRoZSBtYWluIGFuaW1hdGlvbiBlbmQgZXZlbnRcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZEV2ZW50TmFtZSA9IHRoaXMuX2dldEFuaW1hdGlvbkVuZEV2ZW50TmFtZSgpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUExMXlDb250YWluZXIoKTtcclxuICAgIH1cclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZXZlbnRzKSwgKF9hID0ge30sIF9hW2V2ZW50XSA9IGNiLCBfYSkpO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbiwgdHlwZSkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBOb3R5ZkFycmF5RXZlbnQuQWRkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE5vdHlmQXJyYXlFdmVudC5SZW1vdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5yZW1vdmVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVuZGVyZWROb3RpZmljYXRpb24gPSB0aGlzLl9wb3BSZW5kZXJlZE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgICAgIHZhciBub2RlO1xyXG4gICAgICAgIGlmICghcmVuZGVyZWROb3RpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlID0gcmVuZGVyZWROb3RpZmljYXRpb24ubm9kZTtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ25vdHlmX190b2FzdC0tZGlzYXBwZWFyJyk7XHJcbiAgICAgICAgdmFyIGhhbmRsZUV2ZW50O1xyXG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmFuaW1hdGlvbkVuZEV2ZW50TmFtZSwgKGhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihfdGhpcy5hbmltYXRpb25FbmRFdmVudE5hbWUsIGhhbmRsZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLmFkZE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuX3JlbmRlck5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHsgbm90aWZpY2F0aW9uOiBub3RpZmljYXRpb24sIG5vZGU6IG5vZGUgfSk7XHJcbiAgICAgICAgLy8gRm9yIGExMXkgcHVycG9zZXMsIHdlIHN0aWxsIHdhbnQgdG8gYW5ub3VuY2UgdGhhdCB0aGVyZSdzIGEgbm90aWZpY2F0aW9uIGluIHRoZSBzY3JlZW5cclxuICAgICAgICAvLyBldmVuIGlmIGl0IGNvbWVzIHdpdGggbm8gbWVzc2FnZS5cclxuICAgICAgICB0aGlzLl9hbm5vdW5jZShub3RpZmljYXRpb24ub3B0aW9ucy5tZXNzYWdlIHx8ICdOb3RpZmljYXRpb24nKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLl9yZW5kZXJOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciBjYXJkID0gdGhpcy5fYnVpbGROb3RpZmljYXRpb25DYXJkKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG5vdGlmaWNhdGlvbi5vcHRpb25zLmNsYXNzTmFtZTtcclxuICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIChfYSA9IGNhcmQuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX2EsIGNsYXNzTmFtZS5zcGxpdCgnICcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmQ7XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fcG9wUmVuZGVyZWROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIGlkeCA9IC0xO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCAmJiBpZHggPCAwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm90aWZpY2F0aW9uc1tpXS5ub3RpZmljYXRpb24gPT09IG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25zLnNwbGljZShpZHgsIDEpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5nZXRYUG9zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLngpIHx8ICdyaWdodCc7XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5nZXRZUG9zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnkpIHx8ICdib3R0b20nO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuYWRqdXN0Q29udGFpbmVyQWxpZ25tZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgYWxpZ24gPSB0aGlzLlhfUE9TSVRJT05fRkxFWF9NQVBbdGhpcy5nZXRYUG9zaXRpb24ob3B0aW9ucyldO1xyXG4gICAgICAgIHZhciBqdXN0aWZ5ID0gdGhpcy5ZX1BPU0lUSU9OX0ZMRVhfTUFQW3RoaXMuZ2V0WVBvc2l0aW9uKG9wdGlvbnMpXTtcclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmNvbnRhaW5lci5zdHlsZTtcclxuICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eSgnanVzdGlmeS1jb250ZW50JywganVzdGlmeSk7XHJcbiAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoJ2FsaWduLWl0ZW1zJywgYWxpZ24pO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuX2J1aWxkTm90aWZpY2F0aW9uQ2FyZCA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gbm90aWZpY2F0aW9uLm9wdGlvbnM7XHJcbiAgICAgICAgdmFyIGljb25PcHRzID0gb3B0aW9ucy5pY29uO1xyXG4gICAgICAgIC8vIEFkanVzdCBjb250YWluZXIgYWNjb3JkaW5nIHRvIHBvc2l0aW9uIChlLmcuIHRvcC1sZWZ0LCBib3R0b20tY2VudGVyLCBldGMpXHJcbiAgICAgICAgdGhpcy5hZGp1c3RDb250YWluZXJBbGlnbm1lbnQob3B0aW9ucyk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGVsZW1lbnRzXHJcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbkVsZW0gPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QnIH0pO1xyXG4gICAgICAgIHZhciByaXBwbGUgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9fcmlwcGxlJyB9KTtcclxuICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHsgdGFnTmFtZTogJ2RpdicsIGNsYXNzTmFtZTogJ25vdHlmX193cmFwcGVyJyB9KTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHsgdGFnTmFtZTogJ2RpdicsIGNsYXNzTmFtZTogJ25vdHlmX19tZXNzYWdlJyB9KTtcclxuICAgICAgICBtZXNzYWdlLmlubmVySFRNTCA9IG9wdGlvbnMubWVzc2FnZSB8fCAnJztcclxuICAgICAgICB2YXIgbWFpbkNvbG9yID0gb3B0aW9ucy5iYWNrZ3JvdW5kIHx8IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBpY29uIGFuZCBhcHBlbmQgaXQgdG8gdGhlIGNhcmRcclxuICAgICAgICBpZiAoaWNvbk9wdHMpIHtcclxuICAgICAgICAgICAgdmFyIGljb25Db250YWluZXIgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9faWNvbicgfSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk9wdHMgPT09ICdzdHJpbmcnIHx8IGljb25PcHRzIGluc3RhbmNlb2YgU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBuZXcgU3RyaW5nKGljb25PcHRzKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk9wdHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBpY29uT3B0cy50YWdOYW1lLCB0YWdOYW1lID0gX2EgPT09IHZvaWQgMCA/ICdpJyA6IF9hLCBjbGFzc05hbWVfMSA9IGljb25PcHRzLmNsYXNzTmFtZSwgdGV4dCA9IGljb25PcHRzLnRleHQsIF9iID0gaWNvbk9wdHMuY29sb3IsIGNvbG9yID0gX2IgPT09IHZvaWQgMCA/IG1haW5Db2xvciA6IF9iO1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb25FbGVtZW50ID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiB0YWdOYW1lLCBjbGFzc05hbWU6IGNsYXNzTmFtZV8xLCB0ZXh0OiB0ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgICBpY29uQ29udGFpbmVyLmFwcGVuZENoaWxkKGljb25FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25Db250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbkVsZW0uYXBwZW5kQ2hpbGQod3JhcHBlcik7XHJcbiAgICAgICAgLy8gQWRkIHJpcHBsZSBpZiBhcHBsaWNhYmxlLCBlbHNlIGp1c3QgcGFpbnQgdGhlIGZ1bGwgdG9hc3RcclxuICAgICAgICBpZiAobWFpbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJpcHBsZSkge1xyXG4gICAgICAgICAgICAgICAgcmlwcGxlLnN0eWxlLmJhY2tncm91bmQgPSBtYWluQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FbGVtLmFwcGVuZENoaWxkKHJpcHBsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FbGVtLnN0eWxlLmJhY2tncm91bmQgPSBtYWluQ29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGRpc21pc3MgYnV0dG9uXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzbWlzc2libGUpIHtcclxuICAgICAgICAgICAgdmFyIGRpc21pc3NXcmFwcGVyID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiAnZGl2JywgY2xhc3NOYW1lOiAnbm90eWZfX2Rpc21pc3MnIH0pO1xyXG4gICAgICAgICAgICB2YXIgZGlzbWlzc0J1dHRvbiA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX2Rpc21pc3MtYnRuJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpc21pc3NXcmFwcGVyLmFwcGVuZENoaWxkKGRpc21pc3NCdXR0b24pO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGRpc21pc3NXcmFwcGVyKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uRWxlbS5jbGFzc0xpc3QuYWRkKFwibm90eWZfX3RvYXN0LS1kaXNtaXNzaWJsZVwiKTtcclxuICAgICAgICAgICAgZGlzbWlzc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IF90aGlzLmV2ZW50cylbTm90eWZFdmVudC5EaXNtaXNzXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHsgdGFyZ2V0OiBub3RpZmljYXRpb24sIGV2ZW50OiBldmVudCB9KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm90aWZpY2F0aW9uRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgeyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gX3RoaXMuZXZlbnRzKVtOb3R5ZkV2ZW50LkNsaWNrXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHsgdGFyZ2V0OiBub3RpZmljYXRpb24sIGV2ZW50OiBldmVudCB9KTsgfSk7XHJcbiAgICAgICAgLy8gQWRqdXN0IG1hcmdpbnMgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXRzIGFuIHVwcGVyIG9yIGxvd2VyIG5vdGlmaWNhdGlvblxyXG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmdldFlQb3NpdGlvbihvcHRpb25zKSA9PT0gJ3RvcCcgPyAndXBwZXInIDogJ2xvd2VyJztcclxuICAgICAgICBub3RpZmljYXRpb25FbGVtLmNsYXNzTGlzdC5hZGQoXCJub3R5Zl9fdG9hc3QtLVwiICsgY2xhc3NOYW1lKTtcclxuICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9uRWxlbTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLl9jcmVhdGVIVE1MRWxlbWVudCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgIHZhciB0YWdOYW1lID0gX2EudGFnTmFtZSwgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCB0ZXh0ID0gX2EudGV4dDtcclxuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbS50ZXh0Q29udGVudCA9IHRleHQgfHwgbnVsbDtcclxuICAgICAgICByZXR1cm4gZWxlbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW52aXNpYmxlIGNvbnRhaW5lciB3aGljaCB3aWxsIGFubm91bmNlIHRoZSBub3R5ZnMgdG9cclxuICAgICAqIHNjcmVlbiByZWFkZXJzXHJcbiAgICAgKi9cclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuX2NyZWF0ZUExMXlDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGExMXlDb250YWluZXIgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zi1hbm5vdW5jZXInIH0pO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWF0b21pYycsICd0cnVlJyk7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcclxuICAgICAgICAvLyBTZXQgdGhlIGExMXkgY29udGFpbmVyIHRvIGJlIHZpc2libGUgaGlkZGVuLiBDYW4ndCB1c2UgZGlzcGxheTogbm9uZSBhc1xyXG4gICAgICAgIC8vIHNjcmVlbiByZWFkZXJzIHdvbid0IHJlYWQgaXQuXHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5jbGlwID0gJ3JlY3QoMCAwIDAgMCknO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnLTFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcwJztcclxuICAgICAgICBhMTF5Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBhMTF5Q29udGFpbmVyLnN0eWxlLndpZHRoID0gJzFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5vdXRsaW5lID0gJzAnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYTExeUNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5hMTF5Q29udGFpbmVyID0gYTExeUNvbnRhaW5lcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFubm91bmNlcyBhIG1lc3NhZ2UgdG8gc2NyZWVucmVhZGVycy5cclxuICAgICAqL1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fYW5ub3VuY2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hMTF5Q29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgLy8gVGhpcyAxMDBtcyB0aW1lb3V0IGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBicm93c2VyICsgc2NyZWVuLXJlYWRlciBjb21iaW5hdGlvbnM6XHJcbiAgICAgICAgLy8gLSBCb3RoIEpBV1MgYW5kIE5WREEgb3ZlciBJRTExIHdpbGwgbm90IGFubm91bmNlIGFueXRoaW5nIHdpdGhvdXQgYSBub24temVybyB0aW1lb3V0LlxyXG4gICAgICAgIC8vIC0gV2l0aCBDaHJvbWUgYW5kIElFMTEgd2l0aCBOVkRBIG9yIEpBV1MsIGEgcmVwZWF0ZWQgKGlkZW50aWNhbCkgbWVzc2FnZSB3b24ndCBiZSByZWFkIGFcclxuICAgICAgICAvLyAgIHNlY29uZCB0aW1lIHdpdGhvdXQgY2xlYXJpbmcgYW5kIHRoZW4gdXNpbmcgYSBub24temVybyBkZWxheS5cclxuICAgICAgICAvLyAodXNpbmcgSkFXUyAxNyBhdCB0aW1lIG9mIHRoaXMgd3JpdGluZykuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWwyL2Jsb2IvbWFzdGVyL3NyYy9jZGsvYTExeS9saXZlLWFubm91bmNlci9saXZlLWFubm91bmNlci50c1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hMTF5Q29udGFpbmVyLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lIHdoaWNoIGFuaW1hdGlvbmVuZCBldmVudCBpcyBzdXBwb3J0ZWRcclxuICAgICAqL1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fZ2V0QW5pbWF0aW9uRW5kRXZlbnROYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ19mYWtlJyk7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb25zID0ge1xyXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uOiAnYW5pbWF0aW9uZW5kJyxcclxuICAgICAgICAgICAgT1RyYW5zaXRpb246ICdvQW5pbWF0aW9uRW5kJyxcclxuICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdEFuaW1hdGlvbkVuZCcsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbmltYXRpb25lbmQnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHQ7XHJcbiAgICAgICAgZm9yICh0IGluIHRyYW5zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChlbC5zdHlsZVt0XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbnNbdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm8gc3VwcG9ydGVkIGFuaW1hdGlvbiBlbmQgZXZlbnQuIFVzaW5nIFwiYW5pbWF0aW9uZW5kXCIgYXMgYSBmYWxsYmFja1xyXG4gICAgICAgIHJldHVybiAnYW5pbWF0aW9uZW5kJztcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZWaWV3O1xyXG59KCkpO1xuXG4vKipcclxuICogTWFpbiBjb250cm9sbGVyIGNsYXNzLiBEZWZpbmVzIHRoZSBtYWluIE5vdHlmIEFQSS5cclxuICovXHJcbnZhciBOb3R5ZiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vdHlmKG9wdHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcyA9IHRoaXMuX3JlbW92ZU5vdGlmaWNhdGlvbjtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBuZXcgTm90eWZBcnJheSgpO1xyXG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBOb3R5ZlZpZXcoKTtcclxuICAgICAgICB2YXIgdHlwZXMgPSB0aGlzLnJlZ2lzdGVyVHlwZXMob3B0cyk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUyksIG9wdHMpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy50eXBlcyA9IHR5cGVzO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5vblVwZGF0ZShmdW5jdGlvbiAoZWxlbSwgdHlwZSkgeyByZXR1cm4gX3RoaXMudmlldy51cGRhdGUoZWxlbSwgdHlwZSk7IH0pO1xyXG4gICAgICAgIHRoaXMudmlldy5vbihOb3R5ZkV2ZW50LkRpc21pc3MsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX2EudGFyZ2V0LCBldmVudCA9IF9hLmV2ZW50O1xyXG4gICAgICAgICAgICBfdGhpcy5fcmVtb3ZlTm90aWZpY2F0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tc3RyaW5nLWxpdGVyYWxcclxuICAgICAgICAgICAgdGFyZ2V0Wyd0cmlnZ2VyRXZlbnQnXShOb3R5ZkV2ZW50LkRpc21pc3MsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgdGhpcy52aWV3Lm9uKE5vdHlmRXZlbnQuQ2xpY2ssIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX2EudGFyZ2V0LCBldmVudCA9IF9hLmV2ZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Wyd0cmlnZ2VyRXZlbnQnXShOb3R5ZkV2ZW50LkNsaWNrLCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAocGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5ub3JtYWxpemVPcHRpb25zKCdlcnJvcicsIHBheWxvYWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZW4ob3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5ub3JtYWxpemVPcHRpb25zKCdzdWNjZXNzJywgcGF5bG9hZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlbihvcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRzID0gdGhpcy5vcHRpb25zLnR5cGVzLmZpbmQoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gX2EudHlwZTtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09IG9wdGlvbnMudHlwZTtcclxuICAgICAgICB9KSB8fCB7fTtcclxuICAgICAgICB2YXIgY29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZmF1bHRPcHRzKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25Qcm9wcyhbJ3JpcHBsZScsICdwb3NpdGlvbicsICdkaXNtaXNzaWJsZSddLCBjb25maWcpO1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSBuZXcgTm90eWZOb3RpZmljYXRpb24oY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9wdXNoTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcclxuICAgIH07XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUuZGlzbWlzc0FsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5ub3RpZmljYXRpb25zLnNwbGljZSgwLCAxKSlcclxuICAgICAgICAgICAgO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXNzaWducyBwcm9wZXJ0aWVzIHRvIGEgY29uZmlnIG9iamVjdCBiYXNlZCBvbiB0d28gcnVsZXM6XHJcbiAgICAgKiAxLiBJZiB0aGUgY29uZmlnIG9iamVjdCBhbHJlYWR5IHNldHMgdGhhdCBwcm9wLCBsZWF2ZSBpdCBhcyBzb1xyXG4gICAgICogMi4gT3RoZXJ3aXNlLCB1c2UgdGhlIGRlZmF1bHQgcHJvcCBmcm9tIHRoZSBnbG9iYWwgb3B0aW9uc1xyXG4gICAgICpcclxuICAgICAqIEl0J3MgaW50ZW5kZWQgdG8gYnVpbGQgdGhlIGZpbmFsIGNvbmZpZyBvYmplY3QgdG8gb3BlbiBhIG5vdGlmaWNhdGlvbi4gZS5nLiBpZlxyXG4gICAgICogJ2Rpc21pc3NpYmxlJyBpcyBub3Qgc2V0LCB0aGVuIHVzZSB0aGUgdmFsdWUgZnJvbSB0aGUgZ2xvYmFsIGNvbmZpZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSBwcm9wZXJ0aWVzIHRvIGJlIGFzc2lnbmVkIHRvIHRoZSBjb25maWcgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgbmVlZCB0byBiZSBzZXRcclxuICAgICAqL1xyXG4gICAgTm90eWYucHJvdG90eXBlLmFzc2lnblByb3BzID0gZnVuY3Rpb24gKHByb3BzLCBjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICAgICAgLy8gaW50ZW50aW9uYWwgZG91YmxlIGVxdWFsaXR5IHRvIGNoZWNrIGZvciBib3RoIG51bGwgYW5kIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWdbcHJvcF0gPT0gbnVsbCA/IF90aGlzLm9wdGlvbnNbcHJvcF0gOiBjb25maWdbcHJvcF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLl9wdXNoTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnB1c2gobm90aWZpY2F0aW9uKTtcclxuICAgICAgICB2YXIgZHVyYXRpb24gPSBub3RpZmljYXRpb24ub3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gbm90aWZpY2F0aW9uLm9wdGlvbnMuZHVyYXRpb24gOiB0aGlzLm9wdGlvbnMuZHVyYXRpb247XHJcbiAgICAgICAgaWYgKGR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3JlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pOyB9LCBkdXJhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE5vdHlmLnByb3RvdHlwZS5fcmVtb3ZlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMubm90aWZpY2F0aW9ucy5pbmRleE9mKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLm5vcm1hbGl6ZU9wdGlvbnMgPSBmdW5jdGlvbiAodHlwZSwgcGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0geyB0eXBlOiB0eXBlIH07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBvcHRpb25zLm1lc3NhZ2UgPSBwYXlsb2FkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgcGF5bG9hZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfTtcclxuICAgIE5vdHlmLnByb3RvdHlwZS5yZWdpc3RlclR5cGVzID0gZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgICAgICB2YXIgaW5jb21pbmdUeXBlcyA9ICgob3B0cyAmJiBvcHRzLnR5cGVzKSB8fCBbXSkuc2xpY2UoKTtcclxuICAgICAgICB2YXIgZmluYWxEZWZhdWx0VHlwZXMgPSBERUZBVUxUX09QVElPTlMudHlwZXMubWFwKGZ1bmN0aW9uIChkZWZhdWx0VHlwZSkge1xyXG4gICAgICAgICAgICAvLyBmaW5kIGlmIHRoZXJlJ3MgYSBkZWZhdWx0IHR5cGUgd2l0aGluIHRoZSB1c2VyIGlucHV0J3MgdHlwZXMsIGlmIHNvLCBpdCBtZWFucyB0aGUgdXNlclxyXG4gICAgICAgICAgICAvLyB3YW50cyB0byBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdCBzZXR0aW5nc1xyXG4gICAgICAgICAgICB2YXIgdXNlclR5cGVJZHggPSAtMTtcclxuICAgICAgICAgICAgaW5jb21pbmdUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0LCBpZHgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0LnR5cGUgPT09IGRlZmF1bHRUeXBlLnR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclR5cGVJZHggPSBpZHg7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgdXNlclR5cGUgPSB1c2VyVHlwZUlkeCAhPT0gLTEgPyBpbmNvbWluZ1R5cGVzLnNwbGljZSh1c2VyVHlwZUlkeCwgMSlbMF0gOiB7fTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0VHlwZSksIHVzZXJUeXBlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmluYWxEZWZhdWx0VHlwZXMuY29uY2F0KGluY29taW5nVHlwZXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOb3R5ZjtcclxufSgpKTtcblxuZXhwb3J0IHsgREVGQVVMVF9PUFRJT05TLCBOb3R5ZiwgTm90eWZBcnJheSwgTm90eWZBcnJheUV2ZW50LCBOb3R5ZkV2ZW50LCBOb3R5Zk5vdGlmaWNhdGlvbiwgTm90eWZWaWV3IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=