{% extends "template.ui.html.twig" %}

{% block classeActiveDashboard %}active
{% endblock %}
{% block classeOpenDashboard %}menu-open
{% endblock %}

{% block appTitreRubrique %}
	<i class="nav-icon fas fa-tachometer-alt"></i>
	{{appTitreRubrique}}
{% endblock %}

{% block appCorps %}
	<!-- Content Wrapper. Contains page content -->
	<div class="" style="min-height: 1345.6px;">
		<!-- Content Header (Page header) -->
		<section class="content-header">
			<div class="container-fluid">

				<!-- Titre / Les volumes de deonnées -->
				<div class="row">
					<div class="col">
						<small>Entités / Nombres d'enregistrements</small>
					</div>
				</div>
				<!-- Les volumes de données -->
				<div class="row">
				<!-- info-box - Assureur -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-shield-halved"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('assureur.list') }}">
							<span class="info-box-text">Assureurs</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['assureurs']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['assureurs']['limit'] != null %}
								 sur {{data_nb_enregistrements['assureurs']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Automobile -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-car"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('automobile.list') }}">
							<span class="info-box-text">Automobiles</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['automobiles']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['automobiles']['limit'] != null %}
								 sur {{data_nb_enregistrements['automobiles']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Client -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-people-roof"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('client.list') }}">
							<span class="info-box-text">Clients</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['clients']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['clients']['limit'] != null %}
								 sur {{data_nb_enregistrements['clients']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Contact -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
						<span class="info-box-icon bg-secondary"><i class="fa-solid fa-address-book"></i></span>

						<div class="info-box-content">
							<a class="text-black" href="{{ path('contact.list') }}">
								<span class="info-box-text">Contacts</span>
								<span class="info-box-number">
									<i class="fa-solid fa-paperclip"></i>
									{{data_nb_enregistrements['contacts']['valeur']|number_format(0, ',', '.')}}
									{% if data_nb_enregistrements['contacts']['limit'] != null %}
									sur {{data_nb_enregistrements['contacts']['limit']|number_format(0, ',', '.')}}
									{% endif %}
								</span>
							</a>
						</div>
						<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Entreprise -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-house-laptop"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('entreprise.list') }}">
							<span class="info-box-text">Entreprises</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['entreprises']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['entreprises']['limit'] != null %}
								sur {{data_nb_enregistrements['entreprises']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Impots et taxes -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
						<span class="info-box-icon bg-secondary"><i class="fa-solid fa-scale-balanced"></i></span>

						<div class="info-box-content">
							<a class="text-black" href="{{ path('taxe.list') }}">
								<span class="info-box-text">Impôts et taxes</span>
								<span class="info-box-number">
									<i class="fa-solid fa-paperclip"></i>
									{{data_nb_enregistrements['impots_et_taxes']['valeur']|number_format(0, ',', '.')}}
									{% if data_nb_enregistrements['impots_et_taxes']['limit'] != null %}
									sur {{data_nb_enregistrements['impots_et_taxes']['limit']|number_format(0, ',', '.')}}
									{% endif %}
								</span>
							</a>
						</div>
						<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Monnaies -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
						<span class="info-box-icon bg-secondary"><i class="fa-solid fa-money-check-dollar"></i></span>

						<div class="info-box-content">
							<a class="text-black" href="{{ path('monnaie.list') }}">
								<span class="info-box-text">Monnaies</span>
								<span class="info-box-number">
									<i class="fa-solid fa-paperclip"></i>
									{{data_nb_enregistrements['monnaies']['valeur']|number_format(0, ',', '.')}}
									{% if data_nb_enregistrements['monnaies']['limit'] != null %}
									sur {{data_nb_enregistrements['monnaies']['limit']|number_format(0, ',', '.')}}
									{% endif %}
								</span>
							</a>
						</div>
						<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Partenaires -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-handshake"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('poppartenaire.list') }}">
							<span class="info-box-text">Partenaires</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['partenaires']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['partenaires']['limit'] != null %}
								sur {{data_nb_enregistrements['partenaires']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->

				<!-- info-box - Polices -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-umbrella"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('police.list') }}">
							<span class="info-box-text">Polices</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['polices']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['polices']['limit'] != null %}
								sur {{data_nb_enregistrements['polices']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->


				<!-- info-box - Produits -->
				<div class="col-md-2 col-sm-6 col-12">
					<div class="info-box">
					<span class="info-box-icon bg-secondary"><i class="fa-solid fa-hands-holding-child"></i></span>

					<div class="info-box-content">
						<a class="text-black" href="{{ path('produit.list') }}">
							<span class="info-box-text">Produits</span>
							<span class="info-box-number">
								<i class="fa-solid fa-paperclip"></i>
								{{data_nb_enregistrements['produits']['valeur']|number_format(0, ',', '.')}}
								{% if data_nb_enregistrements['produits']['limit'] != null %}
								sur {{data_nb_enregistrements['produits']['limit']|number_format(0, ',', '.')}}
								{% endif %}
							</span>
						</a>
					</div>
					<!-- /.info-box-content -->
					</div>
					<!-- /.info-box -->
				</div>
				<!-- /.col -->
				</div>

				<div class="row">
					<div class="col">
						<small>Champs de recherche</small>
					</div>
				</div>

				<div class="row mb-2">
					{# BLOC DU MOTEUR DE RECHERCHE #}
					{{ form_start(search_form) }}
					<div class="align-content-center">
						<div class="form-row align-items-end mb-2">
							<div class="col">
								{{ form_row(search_form.assureur) }}
							</div>
							<div class="col">
								{{ form_row(search_form.produit) }}
							</div>
							<div class="col">
								{{ form_row(search_form.partenaire) }}
							</div>
							<div class="col">
								{{ form_row(search_form.client) }}
							</div>
						</div>
						<div class="form-row align-items-end">
							<div class="col">
								{{ form_row(search_form.dateA) }}
							</div>
							<div class="col">
								{{ form_row(search_form.dateB) }}
							</div>
							<div class="col">
								{{ form_row(search_form.motcle) }}
							</div>
							<div class="col">
								<button type="submit" class="btn btn-primary">
									<i class="fa-solid fa-magnifying-glass"></i>
									Chercher
								</button>
							</div>
						</div>
						<div class="form-row align-items-end m-2" style="display:none">
							<div class="col">
								{{ form_row(search_form.taxe) }}
							</div>
						</div>
					</div>
					{{ form_end(search_form) }}
				</div>

				<div class="row">
					<div class="col-sm-6">
						<small>Agrégats</small>
					</div>
				</div>

				<div class="row">
					{# BLOC DES AGREGATEURS / CHIFFRES GLOBAUX #}
					<div
						class="col-lg-3 col-6">
						<!-- small box -->
						<div class="small-box bg-info">
							<div class="inner">
								<h4>PRIMES</h4>
								<h5>
									{{agregats.codemonnaie}}
									{{agregats.primetotale|number_format(2, ',', '.')}}
								</h5>
								Prime nette:
								{{agregats.codemonnaie}}
								{{agregats.primenette|number_format(2, ',', '.')}}).
							</div>
							<div class="icon">
								<i class="fa-solid fa-umbrella"></i>
							</div>
							<a href="#" class="small-box-footer">
								Primes d'assurances émises
							</a>
						</div>
					</div>
					<!-- ./col -->
					<div
						class="col-lg-3 col-6">
						<!-- small box -->
						<div class="small-box bg-success">
							<div class="inner">
								<h4>COMMISSIONS</h4>
								<h5>
									{{agregats.codemonnaie}}
									{{agregats.commissiontotale|number_format(2, ',', '.')}}
								</h5>
								Commissions nettes:
								{{agregats.codemonnaie}}
								{{agregats.commissionnette|number_format(2, ',', '.')}}).
							</div>
							<div class="icon">
								<i class="fa-solid fa-house-laptop"></i>
							</div>
							<a href="#" class="small-box-footer">
								Commissions de courtage
							</a>
						</div>
					</div>
					<!-- ./col -->
					<div
						class="col-lg-3 col-6">
						<!-- small box -->
						<div class="small-box bg-warning">
							<div class="inner">
								<h4>RETRO-COMMISSIONS</h4>
								<h5>
									{{agregats.codemonnaie}}
									{{agregats.retrocommissiontotale|number_format(2, ',', '.')}}
								</h5>
								Retro-commissions
							</div>
							<div class="icon">
								<i class="fa-solid fa-handshake"></i>
							</div>
							<a href="#" class="small-box-footer">
								Commissions dues aux partenaires
							</a>
						</div>
					</div>
					<!-- ./col -->
					<div
						class="col-lg-3 col-6">
						<!-- small box -->
						<div class="small-box bg-danger">
							<div class="inner">
								<h4>IMPOTS & TAXES</h4>
								<h5>
									{{agregats.codemonnaie}}
									{{agregats.impotettaxetotale|number_format(2, ',', '.')}}
								</h5>
								Impôts et taxes.
							</div>
							<div class="icon">
								<i class="fa-solid fa-scale-balanced"></i>
							</div>
							<a href="#" class="small-box-footer">
								Impôts et taxes générées.
							</a>
						</div>
					</div>
					<!-- ./col -->
				</div>
			</div>
			<!-- /.container-fluid -->
		</section>

		<!-- Main content -->
		<section class="content">
			<div class="container-fluid">
				<div class="row">
					<div class="col">
						<small>Grapphiques et histogrammes</small>
					</div>
				</div>

				<!--Graphique :  Primes par mois -->
				<div class="row">
				<div class="col-12">
					<!-- Graphique : Primes par mois -->
					<div class="card card card-gray card-outline">
					<div class="card-header">
						<h3 class="card-title">
						<i class="far fa-chart-bar"></i>                
						Primes par mois</h3>
						<div class="card-tools">
						<button type="button" class="btn btn-tool" data-card-widget="collapse">
							<i class="fas fa-minus"></i>
						</button>
						<button type="button" class="btn btn-tool" data-card-widget="remove">
							<i class="fas fa-times"></i>
						</button>
						</div>
					</div>
					<div class="card-body">
						<div class="chart"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
						<canvas id="primes_mois" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 476px;" width="952" height="500" class="chartjs-render-monitor"></canvas>
						<div class="primes_ttc_mois" data-donnees = "{{data_primes_ttc_mois|serialize(format = 'json')}}"></div>
						<div class="primes_ht_mois" data-donnees = "{{data_primes_ht_mois|serialize(format = 'json')}}"></div>
						<div class="fronting_mois" data-donnees = "{{data_fronting_mois|serialize(format = 'json')}}"></div>
						</div>
					</div>
					<!-- /.card-body -->
					</div>
					<!-- /.card -->
				</div>
				</div>


				<!-- Graphique : Commissions par mois -->
				<div class="row">
				<!-- Graphique : Commission de courtage par mois -->
				<div class="col-12">
					<!-- Graphique : Commission de courtage par mois -->
					<div class="card card card-gray card-outline">
					<div class="card-header">
						<h3 class="card-title">
						<i class="far fa-chart-bar"></i>                
						Commissions de courtage par mois</h3>
						<div class="card-tools">
						<button type="button" class="btn btn-tool" data-card-widget="collapse">
							<i class="fas fa-minus"></i>
						</button>
						<button type="button" class="btn btn-tool" data-card-widget="remove">
							<i class="fas fa-times"></i>
						</button>
						</div>
					</div>
					<div class="card-body">
						<div class="chart"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
						<canvas id="commission_nette_mois" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 476px;" width="952" height="500" class="chartjs-render-monitor"></canvas>
						<div class="commissions_nettes_mois" data-donnees = "{{data_com_nettes_mois|serialize(format = 'json')}}"></div>
						<div class="commissions_encaissees_mois" data-donnees = "{{data_com_encaissees_mois|serialize(format = 'json')}}"></div>
						<div class="commissions_impayees_mois" data-donnees = "{{data_com_impayees_mois|serialize(format = 'json')}}"></div>
						</div>
					</div>
					<!-- /.card-body -->
					</div>
					<!-- /.card -->
				</div>
				</div>


				<!-- Graphique : Primes par assureur -->
				<div class="row">
					<!-- Graphique : Primes par assureur -->
					<div class="col-md-4">
						<!-- Graphique : Primes par assureur -->
						<div class="card card-gray card-outline">
						<div class="card-header">
							<h3 class="card-title">
							<i class="far fa-chart-bar"></i>
							Primes / assureur
							</h3>

							<div class="card-tools">
							<button type="button" class="btn btn-tool" data-card-widget="collapse">
								<i class="fas fa-minus"></i>
							</button>
							<button type="button" class="btn btn-tool" data-card-widget="remove">
								<i class="fas fa-times"></i>
							</button>
							</div>
						</div>
						<div class="card-body">
							<div id="primes_assureur" style="height: 300px;"></div>
									<div class="primes_assureur" data-donnees = "{{data_primes_assureur|serialize(format = 'json')}}"></div>
						</div>
						<!-- /.card-body-->
						</div>
						<!-- /.card -->
					</div>

					<!-- Commissions nette par assureur -->
					<div class="col-md-4">
						<!-- Commissions nette par assureur -->
						<div class="card card-gray card-outline">
						<div class="card-header">
							<h3 class="card-title">
							<i class="far fa-chart-bar"></i>
							Com. nettes / assureur
							</h3>

							<div class="card-tools">
							<button type="button" class="btn btn-tool" data-card-widget="collapse">
								<i class="fas fa-minus"></i>
							</button>
							<button type="button" class="btn btn-tool" data-card-widget="remove">
								<i class="fas fa-times"></i>
							</button>
							</div>
						</div>
						<div class="card-body">
							<div id="commissions_nettes_assureur" style="height: 300px;"></div>
									<div class="commissions_nettes_assureur" data-donnees = "{{data_com_nettes|serialize(format = 'json')}}"></div>
						</div>
						<!-- /.card-body-->
						</div>
						<!-- /.card -->
					</div>
					<!-- /.col -->

					<!-- Commissions impayées par assureur -->
					<div class="col-md-4">
						<!-- Commissions impayées par assureur -->
						<div class="card card-gray card-outline">
						<div class="card-header">
							<h3 class="card-title">
							<i class="far fa-chart-bar"></i>
							Com. impayées / assureur
							</h3>

							<div class="card-tools">
							<button type="button" class="btn btn-tool" data-card-widget="collapse">
								<i class="fas fa-minus"></i>
							</button>
							<button type="button" class="btn btn-tool" data-card-widget="remove">
								<i class="fas fa-times"></i>
							</button>
							</div>
						</div>
						<div class="card-body">
							<div id="commissions_impayees_assureur" style="height: 300px;"></div>
									<div class="commissions_impayees_assureur" data-donnees = "{{data_com_impayees|serialize(format = 'json')}}"></div>
						</div>
						<!-- /.card-body-->
						</div>
						<!-- /.card -->
					</div>
					<!-- /.col -->
				</div>

				<!-- Synthèse - Les listes d'enregistrements -->
				<div class="row mt-4">
					<div class="col">
						<small>Synthèses</small>
					</div>
				</div>


				<!--Synthèse production par assureur -->
				{% if data_syntheses_production_assureur.donnees is defined %}
					<div class="row">
						<div class="col-12">

							<!-- Primes par assureur -->
							<div class="card card-gray card-outline collapsed-card">
							<div class="card-header">
								<h3 class="card-title">
								<i class="fa-solid fa-umbrella"></i>        
								Synthèse - Production par assureur</h3>
								<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fas fa-plus"></i>
								</button>
								<button type="button" class="btn btn-tool" data-card-widget="remove">
									<i class="fas fa-times"></i>
								</button>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body table-responsive p-3" style="display:none;">
								<table class="table table-hover text-nowrap table-sm">
									<thead>
										<tr class="bg-secondary">
											{% set compteur_titre = 0 %}
											{% for titre in data_syntheses_production_assureur.titres %}
												{% if compteur_titre == 0 %}
													<th>{{ titre }}</th>
												{% else %}
													<th class="text-right">{{ titre }}</th>
												{% endif %}
												{% set compteur_titre = compteur_titre + 1 %}
											{% endfor %}
										</tr>
									</thead>
									<tbody>
										{% for donnee in data_syntheses_production_assureur.donnees %}
											<tr class="bg-light">
												{% set compteur_sous_total = 0 %}
												{% for sous_total in donnee.sous_total %}
													{% if compteur_sous_total == 0 %}
														<td><span class="font-weight-bold">{{ sous_total }}</span></td>
													{% else %}
														{% if compteur_sous_total == (data_taxes|length) + 5 %}
															<td class="text-right text-danger">
															<span class="font-weight-bold">
																{% if sous_total == 0 %}
																	-
																{% else %}
																	$ {{ sous_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
															</td>
														{% else %}
															<td class="text-right">
																<span class="font-weight-bold">
																	{% if sous_total == 0 %}
																		-
																	{% else %}
																		$ {{ sous_total|number_format(2, ',', '.') }}
																	{% endif %}
																</span>
															</td>
														{% endif %}
													{% endif %}
													{% set compteur_sous_total = compteur_sous_total + 1 %}
												{% endfor %}
											</tr>
											{% for ligne in donnee.lignes %}
												<tr>
													{% set compteur_ligne = 0 %}
													{% for valeur in ligne %}
														{% if compteur_ligne == 0 %}
															<td><span class="font-weight-light pl-3">{{ valeur }}</span></td>
														{% else %}
															{% if compteur_ligne == 2 %}
																<td class="text-right">
																	<span class="font-weight-bold">
																		{% if valeur == 0 %}
																			-
																		{% else %}
																			$ {{ valeur|number_format(2, ',', '.') }}
																		{% endif %}
																	</span>
																</td>
															{% else %}
																{% if compteur_ligne == (data_taxes|length) + 5 %}
																	<td class="text-right text-danger">
																		<span class="font-weight-bold">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% else %}
																	<td class="text-right">
																		<span class="font-weight-light">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% endif %}
															{% endif %}
														{% endif %}
														{% set compteur_ligne = compteur_ligne + 1 %}
													{% endfor %}
												</tr>
											{% endfor %}
											
										{% endfor %}
									</tbody>
									<thead>
										<tr class="bg-secondary">
											{% set compteur_grand_total = 0 %}
											{% for grand_total in data_syntheses_production_assureur.totaux %}
												{% if compteur_grand_total == 0 %}
													<th>{{ grand_total }}</th>
												{% else %}
													{% if compteur_grand_total == 1 %}
														<th class="text-right">
															<span class="font-weight-bold">
																{% if grand_total == 0 %}
																	-
																{% else %}
																	$ {{ grand_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
														</th>
													{% else %}
														<th class="text-right">
															{% if grand_total == 0 %}
																-
															{% else %}
																$ {{ grand_total|number_format(2, ',', '.') }}
															{% endif %}
														</th>
													{% endif %}
												{% endif %}
												{% set compteur_grand_total = compteur_grand_total + 1 %}
											{% endfor %}
										</tr>
									</thead>
								</table>
							</div>
							<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>			
				{% endif %}
				


				<!--Synthèse production par mois -->
				{% if data_syntheses_production_mois.donnees is defined %}
					<div class="row">
						<div class="col-12">

							<!-- Primes par mois -->
							<div class="card card-gray card-outline collapsed-card">
							<div class="card-header">
								<h3 class="card-title">
								<i class="fa-solid fa-umbrella"></i>        
								Synthèse - Production par mois</h3>
								<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fas fa-plus"></i>
								</button>
								<button type="button" class="btn btn-tool" data-card-widget="remove">
									<i class="fas fa-times"></i>
								</button>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body table-responsive p-3" style="display:none;">
								<table class="table table-hover text-nowrap table-sm">
									<thead>
										<tr class="bg-secondary">
											{% set compteur_titre = 0 %}
											{% for titre in data_syntheses_production_mois.titres %}
												{% if compteur_titre == 0 %}
													<th>{{ titre }}</th>
												{% else %}
													<th class="text-right">{{ titre }}</th>
												{% endif %}
												{% set compteur_titre = compteur_titre + 1 %}
											{% endfor %}
										</tr>
									</thead>
									<tbody>
										{% for donnee in data_syntheses_production_mois.donnees %}
											<tr class="bg-light">
												{% set compteur_sous_total = 0 %}
												{% for sous_total in donnee.sous_total %}
													{% if compteur_sous_total == 0 %}
														<td><span class="font-weight-bold">{{ sous_total }}</span></td>
													{% else %}
														{% if compteur_sous_total == (data_taxes|length) + 5 %}
															<td class="text-right text-danger">
															<span class="font-weight-bold">
																{% if sous_total == 0 %}
																	-
																{% else %}
																	$ {{ sous_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
															</td>
														{% else %}
															<td class="text-right">
																<span class="font-weight-bold">
																	{% if sous_total == 0 %}
																		-
																	{% else %}
																		$ {{ sous_total|number_format(2, ',', '.') }}
																	{% endif %}
																</span>
															</td>
														{% endif %}
													{% endif %}
													{% set compteur_sous_total = compteur_sous_total + 1 %}
												{% endfor %}
											</tr>
											{% for ligne in donnee.lignes %}
												<tr>
													{% set compteur_ligne = 0 %}
													{% for valeur in ligne %}
														{% if compteur_ligne == 0 %}
															<td><span class="font-weight-light pl-3">{{ valeur }}</span></td>
														{% else %}
															{% if compteur_ligne == 2 %}
																<td class="text-right">
																	<span class="font-weight-bold">
																		{% if valeur == 0 %}
																			-
																		{% else %}
																			$ {{ valeur|number_format(2, ',', '.') }}
																		{% endif %}
																	</span>
																</td>
															{% else %}
																{% if compteur_ligne == (data_taxes|length) + 5 %}
																	<td class="text-right text-danger">
																		<span class="font-weight-bold">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% else %}
																	<td class="text-right">
																		<span class="font-weight-light">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% endif %}
															{% endif %}
														{% endif %}
														{% set compteur_ligne = compteur_ligne + 1 %}
													{% endfor %}
												</tr>
											{% endfor %}
											
										{% endfor %}
									</tbody>
									<thead>
										<tr class="bg-secondary">
											{% set compteur_grand_total = 0 %}
											{% for grand_total in data_syntheses_production_mois.totaux %}
												{% if compteur_grand_total == 0 %}
													<th>{{ grand_total }}</th>
												{% else %}
													{% if compteur_grand_total == 1 %}
														<th class="text-right">
															<span class="font-weight-bold">
																{% if grand_total == 0 %}
																	-
																{% else %}
																	$ {{ grand_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
														</th>
													{% else %}
														<th class="text-right">
															{% if grand_total == 0 %}
																-
															{% else %}
																$ {{ grand_total|number_format(2, ',', '.') }}
															{% endif %}
														</th>
													{% endif %}
												{% endif %}
												{% set compteur_grand_total = compteur_grand_total + 1 %}
											{% endfor %}
										</tr>
									</thead>
								</table>
							</div>
							<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>			
				{% endif %}


				<!--Synthèse retrocommission par partenaire -->
				{% if data_syntheses_retrocommissions_mois.donnees is defined %}
					<div class="row">
						<div class="col-12">

							<!-- Primes par mois -->
							<div class="card card-gray card-outline collapsed-card">
							<div class="card-header">
								<h3 class="card-title">
								<i class="fa-solid fa-umbrella"></i>        
								Synthèse - Retrocommissions par partenaire</h3>
								<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fas fa-plus"></i>
								</button>
								<button type="button" class="btn btn-tool" data-card-widget="remove">
									<i class="fas fa-times"></i>
								</button>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body table-responsive p-3" style="display:none;">
								<table class="table table-hover text-nowrap table-sm">
									<thead>
										<tr class="bg-secondary">
											{% set compteur_titre = 0 %}
											{% for titre in data_syntheses_retrocommissions_mois.titres %}
												{% if compteur_titre == 0 %}
													<th>{{ titre }}</th>
												{% else %}
													<th class="text-right">{{ titre }}</th>
												{% endif %}
												{% set compteur_titre = compteur_titre + 1 %}
											{% endfor %}
										</tr>
									</thead>
									<tbody>
										{% for donnee in data_syntheses_retrocommissions_mois.donnees %}
											<tr class="bg-light">
												{% set compteur_sous_total = 0 %}
												{% for sous_total in donnee.sous_total %}
													{% if compteur_sous_total == 0 %}
														<td><span class="font-weight-bold">{{ sous_total }}</span></td>
													{% else %}
														{% if compteur_sous_total == (data_taxes|length) + 5 %}
															<td class="text-right text-danger">
															<span class="font-weight-bold">
																{% if sous_total == 0 %}
																	-
																{% else %}
																	$ {{ sous_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
															</td>
														{% else %}
															<td class="text-right">
																<span class="font-weight-bold">
																	{% if sous_total == 0 %}
																		-
																	{% else %}
																		$ {{ sous_total|number_format(2, ',', '.') }}
																	{% endif %}
																</span>
															</td>
														{% endif %}
													{% endif %}
													{% set compteur_sous_total = compteur_sous_total + 1 %}
												{% endfor %}
											</tr>
											{% for ligne in donnee.lignes %}
												<tr>
													{% set compteur_ligne = 0 %}
													{% for valeur in ligne %}
														{% if compteur_ligne == 0 %}
															<td><span class="font-weight-light pl-3">{{ valeur }}</span></td>
														{% else %}
															{% if compteur_ligne == (data_taxes|length) + 2 %}
																<td class="text-right">
																	<span class="font-weight-bold">
																		{% if valeur == 0 %}
																			-
																		{% else %}
																			$ {{ valeur|number_format(2, ',', '.') }}
																		{% endif %}
																	</span>
																</td>
															{% else %}
																{% if compteur_ligne == (data_taxes|length) + 5 %}
																	<td class="text-right text-danger">
																		<span class="font-weight-bold">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% else %}
																	<td class="text-right">
																		<span class="font-weight-light">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% endif %}
															{% endif %}
														{% endif %}
														{% set compteur_ligne = compteur_ligne + 1 %}
													{% endfor %}
												</tr>
											{% endfor %}
											
										{% endfor %}
									</tbody>
									<thead>
										<tr class="bg-secondary">
											{% set compteur_grand_total = 0 %}
											{% for grand_total in data_syntheses_retrocommissions_mois.totaux %}
												{% if compteur_grand_total == 0 %}
													<th>{{ grand_total }}</th>
												{% else %}
													{% if compteur_grand_total == 1 %}
														<th class="text-right">
															<span class="font-weight-bold">
																{% if grand_total == 0 %}
																	-
																{% else %}
																	$ {{ grand_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
														</th>
													{% else %}
														<th class="text-right">
															{% if grand_total == 0 %}
																-
															{% else %}
																$ {{ grand_total|number_format(2, ',', '.') }}
															{% endif %}
														</th>
													{% endif %}
												{% endif %}
												{% set compteur_grand_total = compteur_grand_total + 1 %}
											{% endfor %}
										</tr>
									</thead>
								</table>
							</div>
							<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>			
				{% endif %}


				<!--Synthèse impôt et taxes -->
				{% if data_syntheses_impots_et_taxes_mois.donnees is defined %}
					<div class="row">
						<div class="col-12">

							<!-- Primes par mois -->
							<div class="card card-gray card-outline collapsed-card">
							<div class="card-header">
								<h3 class="card-title">
								<i class="fa-solid fa-umbrella"></i>        
								Synthèse - Impôts et Taxes</h3>
								<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fas fa-plus"></i>
								</button>
								<button type="button" class="btn btn-tool" data-card-widget="remove">
									<i class="fas fa-times"></i>
								</button>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body table-responsive p-3" style="display:none;">
								<table class="table table-hover text-nowrap table-sm">
									<thead>
										<tr class="bg-secondary">
											{% set compteur_titre = 0 %}
											{% for titre in data_syntheses_impots_et_taxes_mois.titres %}
												{% if compteur_titre == 0 %}
													<th>{{ titre }}</th>
												{% else %}
													<th class="text-right">{{ titre }}</th>
												{% endif %}
												{% set compteur_titre = compteur_titre + 1 %}
											{% endfor %}
										</tr>
									</thead>
									<tbody>
										{% for donnee in data_syntheses_impots_et_taxes_mois.donnees %}
											<tr class="bg-light">
												{% set compteur_sous_total = 0 %}
												{% for sous_total in donnee.sous_total %}
													{% if compteur_sous_total == 0 %}
														<td><span class="font-weight-bold">{{ sous_total }}</span></td>
													{% else %}
														{% if compteur_sous_total == 4 %}
															<td class="text-right text-danger">
															<span class="font-weight-bold">
																{% if sous_total == 0 %}
																	-
																{% else %}
																	$ {{ sous_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
															</td>
														{% else %}
															<td class="text-right">
																<span class="font-weight-bold">
																	{% if sous_total == 0 %}
																		-
																	{% else %}
																		$ {{ sous_total|number_format(2, ',', '.') }}
																	{% endif %}
																</span>
															</td>
														{% endif %}
													{% endif %}
													{% set compteur_sous_total = compteur_sous_total + 1 %}
												{% endfor %}
											</tr>
											{% for ligne in donnee.lignes %}
												<tr>
													{% set compteur_ligne = 0 %}
													{% for valeur in ligne %}
														{% if compteur_ligne == 0 %}
															<td><span class="font-weight-light pl-3">{{ valeur }}</span></td>
														{% else %}
															{% if compteur_ligne == 3 %}
																<td class="text-right">
																	<span class="font-weight-bold">
																		{% if valeur == 0 %}
																			-
																		{% else %}
																			$ {{ valeur|number_format(2, ',', '.') }}
																		{% endif %}
																	</span>
																</td>
															{% else %}
																{% if compteur_ligne == 4 %}
																	<td class="text-right text-danger">
																		<span class="font-weight-bold">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% else %}
																	<td class="text-right">
																		<span class="font-weight-light">
																			{% if valeur == 0 %}
																				-
																			{% else %}
																				$ {{ valeur|number_format(2, ',', '.') }}
																			{% endif %}
																		</span>
																	</td>
																{% endif %}
															{% endif %}
														{% endif %}
														{% set compteur_ligne = compteur_ligne + 1 %}
													{% endfor %}
												</tr>
											{% endfor %}
											
										{% endfor %}
									</tbody>
									<thead>
										<tr class="bg-secondary">
											{% set compteur_grand_total = 0 %}
											{% for grand_total in data_syntheses_impots_et_taxes_mois.totaux %}
												{% if compteur_grand_total == 0 %}
													<th>{{ grand_total }}</th>
												{% else %}
													{% if compteur_grand_total == 1 %}
														<th class="text-right">
															<span class="font-weight-bold">
																{% if grand_total == 0 %}
																	-
																{% else %}
																	$ {{ grand_total|number_format(2, ',', '.') }}
																{% endif %}
															</span>
														</th>
													{% else %}
														<th class="text-right">
															{% if grand_total == 0 %}
																-
															{% else %}
																$ {{ grand_total|number_format(2, ',', '.') }}
															{% endif %}
														</th>
													{% endif %}
												{% endif %}
												{% set compteur_grand_total = compteur_grand_total + 1 %}
											{% endfor %}
										</tr>
									</thead>
								</table>
							</div>
							<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>			
				{% endif %}
				{# <div class="row">
				<div class="col-12">

					<!-- Impôts et taxes -->
					<div class="card card-gray card-outline collapsed-card">
					<div class="card-header">
						<h3 class="card-title">
						<i class="fa-solid fa-scale-balanced"></i>       
						Synthèse - Impôts et Taxes</h3>
						<div class="card-tools">
						<button type="button" class="btn btn-tool" data-card-widget="collapse">
							<i class="fas fa-plus"></i>
						</button>
						<button type="button" class="btn btn-tool" data-card-widget="remove">
							<i class="fas fa-times"></i>
						</button>
						</div>
					</div>
					<!-- /.card-header -->
					<div class="card-body table-responsive p-3" style="display:none;">
						<table class="table table-hover text-nowrap table-sm">
						<thead>
							<tr class="bg-secondary">
							<th>ETIQUETTES</th>
							<th class="text-right">COMMISSIONS ENCAISSEES</th>
							<th class="text-right">TAXES DUES</th>
							<th class="text-right">TAXES PAYEES</th>
							<th class="text-right">SOLDE A PAYER</th>
							</tr>
						</thead>
						<tbody>
							<tr class="bg-light">
							<td><span class="font-weight-bold">TAXE SUR LA VALEUR AJOUTEE - TVA (@16%)</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Janvier</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Février</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Mars</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Avril</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Mai</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Juin</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Juillet</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Août</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Septembre</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Octobre</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Novembre</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Décembre</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr class="bg-light">
							<td><span class="font-weight-bold">FRAIS DE SURVEILLANCE - ARCA (@2%)</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 45.454.456,95</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Janvier</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Février</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Mars</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
							<tr>
							<td><span class="font-weight-light pl-3">Avril</span></td>
							<td class="text-right"><span class="font-weight-light">$ 20.000,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.800,45</span></td>
							<td class="text-right"><span class="font-weight-light">$ 5.000,45</span></td>
							<td class="text-right text-danger"><span class="font-weight-bold">$ 800,00</span></td>
							</tr>
						</tbody>
						<thead>
							<tr class="bg-secondary">
							<th>GRAND TOTAL</th>
							<th class="text-right">$ 45.454.456,95</th>
							<th class="text-right">$ 45.454.456,95</th>
							<th class="text-right">$ 45.454.456,95</th>
							<th class="text-right">$ 10.000,05</th>
							</tr>
						</thead>
						</table>
					</div>
					<!-- /.card-body -->
					</div>
					<!-- /.card -->
				</div>
				</div> #}

			</div>
			<!-- /.container-fluid -->
		</section>
		<!-- /.content -->
	</div>


{% endblock %}
